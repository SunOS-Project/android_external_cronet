From bb270290fb91191b30210029a549acfcc480c5fb Mon Sep 17 00:00:00 2001
From: Motomu Utsumi <motomuman@google.com>
Date: Fri, 27 Jan 2023 15:29:14 +0900
Subject: [PATCH 1/1] cronet: Remove androidx dependency for cronet build

base_java doesn't use androidx_core_core if is_cronet_build is true.
So, androidx_core_core can be removed from the deps if is_cronet_build
is true.
This change depends on local patch aosp/2369503

Test: m
Bug: 265913942
Change-Id: Icb251c4c4446aa3b072312e722fa4241ba96f847
---
 base/BUILD.gn | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/base/BUILD.gn b/base/BUILD.gn
index 6e6f24e479cce..ad588bf797722 100644
--- a/base/BUILD.gn
+++ b/base/BUILD.gn
@@ -4269,10 +4269,15 @@ if (is_android) {
       "//third_party/android_deps:com_google_errorprone_error_prone_annotations_java",
       "//third_party/androidx:androidx_annotation_annotation_experimental_java",
       "//third_party/androidx:androidx_annotation_annotation_java",
-      "//third_party/androidx:androidx_collection_collection_java",
-      "//third_party/androidx:androidx_core_core_java",
     ]
 
+    if (!is_cronet_build) {
+      deps += [
+        "//third_party/androidx:androidx_collection_collection_java",
+        "//third_party/androidx:androidx_core_core_java",
+      ]
+    }
+
     sources = [
       "android/java/src/org/chromium/base/ActivityState.java",
       "android/java/src/org/chromium/base/ApiCompatibilityUtils.java",
-- 
2.41.0.694.ge786442a9b-goog

